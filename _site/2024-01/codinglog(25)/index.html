<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">

<head>
  <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>코딩일지(2024-01-24) | CodingLog(by JackSmith-c)</title>
<meta name="description" content="데이터에 입각한 고전신경망과 현대신경망의 차이">


  <meta name="author" content="YUNSUNGWOONG<br><p>기억보다 기록을 추구하는 나의 코딩일지</p>">
  
  <meta property="article:author" content="YUNSUNGWOONG<br><p>기억보다 기록을 추구하는 나의 코딩일지</p>">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="CodingLog(by JackSmith-c)">
<meta property="og:title" content="코딩일지(2024-01-24)">
<meta property="og:url" content="http://localhost:4000/2024-01/codinglog(25)/">


  <meta property="og:description" content="데이터에 입각한 고전신경망과 현대신경망의 차이">







  <meta property="article:published_time" content="2024-01-24T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/2024-01/codinglog(25)/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "YUNSUNGWOONG(JackSmith)",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



<link href="/feed.xml"
  type="application/atom+xml" rel="alternate" title="CodingLog(by JackSmith-c) Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style"
  onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
</noscript>


  <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>

<body
  class="layout--single">
  <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

  

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/002.png" alt="CodingLog(by JackSmith-c)"></a>
        
        <a class="site-title" href="/">
          CodingLog(by JackSmith-c)
          <span class="site-subtitle">My CodingDiary</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Category</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tag</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

  <!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap");



        div.clock {
            position: fixed;
            top: -22%;
            left: 0;
            display: flex;
            height: 100%;
            padding: 17px;
            box-sizing: border-box;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        /* Awesome Border Animation.css */
        .border-blur {
            position: absolute;
            width: 300px;
            height: 250px;
            background: transparent;
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            filter: blur(50px);
        }

        .box {
            position: relative;
            width: 206px;
            height: 135px;
            background: rgba(0, 0, 0, 0.75);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .border-blur::before,
        .border-blur::after {
            border-radius: 50%;
            height: 338px !important;
            width: 215px !important;
        }

        .box::after,
        .border-blur::after {
            content: "";
            position: absolute;
            width: 500px;
            height: 500px;
            background-image: conic-gradient(transparent,
                    transparent,
                    transparent,
                    #fc9e28);
            /*#d400d4*/
            animation: animate 4s linear infinite;
            animation-delay: -2s;
        }

        .box::before,
        .border-blur::before {
            content: "";
            position: absolute;
            width: 500px;
            height: 500px;
            background-image: conic-gradient(transparent,
                    transparent,
                    transparent,
                    #0abf03);
            /*#00ccff*/
            animation: animate 4s linear infinite;
        }

        @keyframes animate {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .box span {
            position: absolute;
            inset: 13px;
            border-radius: 22px;
            background: #141010;
            z-index: 1;
        }

        .box div {
            position: relative;
            z-index: 2;
            color: #fff;
            font-family: Montserrat;
            font-size: 20px;
        }
    </style>
</head>

<body>
    <div class="clock">
        <div class="box">
            <span></span>
            <div id="time"></div>
            <div id="date"></div>
        </div>
        <div class="border-blur"></div>
    </div>


</body>
<script>
    function setClock() {
        var dateInfo = new Date();
        var hour = modifyNumber(dateInfo.getHours());
        var min = modifyNumber(dateInfo.getMinutes());
        var sec = modifyNumber(dateInfo.getSeconds());
        var year = dateInfo.getFullYear();
        var month = dateInfo.getMonth() + 1; //monthIndex를 반환해주기 때문에 1을 더해준다.
        var date = dateInfo.getDate();
        document.getElementById("time").innerHTML = hour + ":" + min + ":" + sec;
        document.getElementById("date").innerHTML = year + "-" + month + "-" + date;
    }
    function modifyNumber(time) {
        if (parseInt(time) < 10) {
            return "0" + time;
        }
        else
            return time;
    }
    window.onload = function () {
        setClock();
        setInterval(setClock, 1000); //1초마다 setClock 함수 실행
    }
</script>

</html>
  <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      .tiktok li {
        width: 70px;
        height: 70px;
        background: linear-gradient(
          90deg,
          rgba(0, 242, 234, 1) 0%,
          rgba(6, 0, 4, 1) 50%,
          rgba(255, 0, 79, 1) 100%
        ) !important;
        display: flex;
        align-items: center;
        position: relative;
        transition: 300ms;
        color: #fff;
        transform-origin: left center;
      }

      .tiktok li::before {
        position: absolute;
        content: '';
        background: linear-gradient(
          90deg,
          rgba(0, 242, 234, 1) 0%,
          rgba(6, 0, 4, 1) 50%,
          rgba(255, 0, 79, 1) 100%
        ) !important;
        width: 25px;
        height: 100%;
        right: -25px;
        clip-path: polygon(0 0, 0% 100%, 100% 50%);
      }

      .sidemenu-parent {
        position: fixed;
        top: 40%;
        left: 0;
        height: 100%;
        padding: 20px;
        box-sizing: border-box;
      }

      .sidemenu ul {
        display: flex;
        flex-direction: column;
        position: absolute;
        left: 0;
        filter: drop-shadow(0 2px 3px #00000054);
      }

      .sidemenu li {
        width: 70px;
        height: 70px;
        background-color: var(--clr);
        display: flex;
        align-items: center;
        position: relative;
        transition: 300ms;
        color: #fff;
        transform-origin: left center;
      }

      .sidemenu li::before {
        position: absolute;
        content: '';
        background-color: var(--clr);
        width: 25.3px;
        height: 100%;
        right: -25px;
        clip-path: polygon(0 0, 0% 100%, 100% 50%);
      }

      .sidemenu i {
        height: 60px !important;
        width: 60px !important;
        display: flex !important;
        justify-content: center;
        align-items: center;
        font-size: 36px;
        position: absolute;
      }

      .sidemenu span {
        text-transform: capitalize;
        font-size: 20px;
        font-weight: 600;
        white-space: nowrap;
        position: absolute;
        transform: translateX(60px);
        padding-left: 10px;
        color: transparent;
      }

      .sidemenu li:hover {
        width: 240px;
      }

      .sidemenu li:hover span {
        color: #fff;
      }

      /* .fa-n:before {
            font-family: Arial;
            font-weight: bold;
            content: 'N';
        } */
    </style>
  </head>

  <body>
    <ul class="sidemenu sidemenu-parent">
      <a href="https://github.com/JackSmith-c">
        <li class="sidemenu" style="--clr: #9b59b6">
          <i class="fa-brands fa-github sidemenu"></i>
          <span>Github</span>
        </li>
      </a>
      <a href="https://blog.naver.com/yhon89">
        <li class="sidemenu" style="--clr: #30ae48">
          <!-- <i class="fa-brands fa-tiktok sidemenu"></i> -->
          <i class="fa-solid fa-n sidemenu"></i>
          <span>Naver</span>
        </li>
      </a>
      <a href="https://www.instagram.com/seongung64/">
        <li class="sidemenu" style="--clr: #dd2a7b">
          <i class="fa-brands fa-instagram sidemenu"></i>
          <span>instagram</span>
        </li>
      </a>
      <!-- <li class="sidemenu"
            style="background: linear-gradient(90deg, rgba(0, 242, 234, 1) 0%, rgba(6, 0, 4, 1) 50%, rgba(255, 0, 79, 1) 100%) !important;">
            <i class="fa-brands fa-tiktok sidemenu"></i>
            <span>TikTok</span>
        </li> -->
      <a href="https://www.youtube.com/channel/UCB4Xq3yWVgdzujvkxeY_MyA">
        <li class="sidemenu" style="--clr: #ff0000">
          <i class="fa-brands fa-youtube sidemenu"></i>
          <span>youtube</span>
        </li>
      </a>
      <!-- <li class="sidemenu" style="--clr: #4fce5d">
            <i class="fa-brands fa-whatsapp sidemenu"></i>
            <span class="sidemenu">whatsapp</span>
        </li> -->
    </ul>
  </body>
</html>

  <div class="initial-content">
    




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#2024-01" itemprop="item"><span itemprop="name">2024 01</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">코딩일지(2024-01-24)</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">YUNSUNGWOONG<br><p>기억보다 기록을 추구하는 나의 코딩일지</p></a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Kyungpook National University<br />Department of Electronic Engineering</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Suwon, Gyeonggi-do</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="코딩일지(2024-01-24)">
    <meta itemprop="description" content="데이터에 입각한 고전신경망과 현대신경망의 차이">
    <meta itemprop="datePublished" content="2024-01-24T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/2024-01/codinglog(25)/" class="u-url" itemprop="url">코딩일지(2024-01-24)
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-01-24T00:00:00+09:00">2024-01-24</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 분 소요
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu"><li><a href="#데이터에-입각한-고전신경망과-현대신경망의-차이">데이터에 입각한 고전신경망과 현대신경망의 차이</a><ul><li><a href="#911-전통적인-신경망">9.1.1 전통적인 신경망</a></li><li><a href="#912-심층-합성공-신경망">9.1.2 심층 합성공 신경망</a></li><li><a href="#설치준비">설치준비</a><ul><li><a href="#1운영체제-버전-확인하기">1&gt;운영체제 버전 확인하기</a></li><li><a href="#2컴파일러-버전-확인하기">2&gt;컴파일러 버전 확인하기</a></li><li><a href="#설치-여유공간-확보하기">설치 여유공간 확보하기</a></li><li><a href="#swap-늘려주기">Swap 늘려주기</a></li></ul></li><li><a href="#본격적으로-opencv-설치하기">본격적으로 OpenCV 설치하기</a></li><li><a href="#삽질현황">삽질현황…</a></li><li><a href="#미니콘다-가상환경-생성하기">미니콘다 가상환경 생성하기</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <h1 id="데이터에-입각한-고전신경망과-현대신경망의-차이">데이터에 입각한 고전신경망과 현대신경망의 차이</h1>

<h2 id="911-전통적인-신경망">9.1.1 전통적인 신경망</h2>

<p>이번 장에서 전통적인 신경망이나 기타 고전적 기계학습 모형(지지벡터 기계, 무작위 숲 등)을 다룰 떄는 데이터를 2차원 배열로 표현하기로 합니다. 한 예로 제6장에서 소개한 붓꽃 데이터 집합의 각 특징 벡터는 특징 네개로 구성된다. 그런 특징 벡터들의 집합을 다음처럼 NumPy 행렬로 표현할 수 있다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">datasets</span><span class="p">.</span><span class="nf">load_iris</span><span class="p">()</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">iris</span><span class="p">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="n">X</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([[5.1, 3.5, 1.4, 0.2],
       [4.9, 3. , 1.4, 0.2],
       [4.7, 3.2, 1.3, 0.2],
       [4.6, 3.1, 1.5, 0.2],
       [5. , 3.6, 1.4, 0.2]])
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Y</span> <span class="o">=</span> <span class="n">iris</span><span class="p">.</span><span class="n">target</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="n">Y</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([0, 0, 0, 0, 0])
</code></pre></div></div>

<p>붓꿏 데이터 집합의 견본들 중 상위 다섯개만 추출해보았다. 이 샘플들은 모두 분류명 0(I, Setosa)에 속한다. 이러한 지식을 모형에 전달하려면, 이 견본들과 대응되는 분류명들을 담은 벡터가 필요하다. Y가 그러한 벡터이다. X[i]는 견본i의 특징벡터이고, Y[i]는 그 특징벡터의 분류명이다. 일반적으로 분류명은 각 분류명 문자열에 대응되는 정수 일련번호로 부호화한다. 분류명을 위한 부호화 벡터로 표현하는 도구 모음들도 있지만, 정수 분류명을 One-Hot 부호하 벡터로 Convert하는 것은 간단한 문제이므로, 여기서는 정수를 사용하기로 한다.</p>
<hr />

<p>다음과 같이 전통적인 뉴럴 네트워크에서는 데이터 셋을 무조건 행렬로 표현하며 각 층에 산재해있는 가중치들의 집합도 모두 행렬로 표현되어 있다. 층과층 사이의 입력과 출력은 벡터이다. 이는 아주 직접적인 방식이므로 이해하는데 어려움이 없을 것이다. 이번에는 더 나아가 좀더 현대적인 심층 신경망은 고전적인 것과 어떤 차이가 있는지도 알아보려고 한다.</p>

<h2 id="912-심층-합성공-신경망">9.1.2 심층 합성공 신경망</h2>

<p>여기서도 마찬가지로 특징벡터들을 사용한다.그런데 고적 신경망과 달리 여기서의 핵심포인트는 합성공 층, 즉 컨볼루션 레이어이다. 이를 통해 데이터에 존재하는 공간적 관계들을 포착하고 활용하자는 데 그 의의가 있다. 많은 경우에 심층 합성곤 신경망에서 가장 많이 사용되는 입력데이터는 바로 2차원 배열로 구성된 이미지 데이터이다.(물론 꼭 이미지여야 할 필요는 없다. 그냥 가장 다루기 쉬워서 그런 것이다)
신경망의 입장에서는 그 입력데이터가 무엇을 의미하는지 알 수 없다.모형의 설계자만이 사전지식에 기초해서 그모형의 구조를 결정할 뿐이다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_sample_image</span>
<span class="n">china</span> <span class="o">=</span> <span class="nf">load_sample_image</span><span class="p">(</span><span class="sh">'</span><span class="s">china.jpg</span><span class="sh">'</span><span class="p">)</span>
<span class="n">china</span><span class="p">.</span><span class="n">shape</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(427, 640, 3)
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">china.jpg</code>는 단순히 3차원으로 되어 있는 하나의 넘파이 배열일 뿐이다. 출력값을 보았을때 세개의 원소값이 써있는 것을 통해 3차원 데이터라는 것을 알 수 있다. 그러면 입체데이터냐?라고 할 수 있겠지만, 그냥 이미지일뿐이다. 일단 너비와 높이로 2차원을 만들어주고 나머지 하나의 축이 채널의 개수를 의미한다. 왜냐하면 어쨋든 색상이라는 것은 컴퓨터에서 보통 RGB색상원리를 가장 많이 사용한다. 이때 빨간색 성분을 나타내는 채널, 초록색 성분을 나타내는 채널, 파란색 성분을 나타내는 채널, 이렇게 총 세개의 채널로 하나의 이미지를 구축하는 것이다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">.</span><span class="nf">fromarray</span><span class="p">(</span><span class="n">china</span><span class="p">).</span><span class="nf">show</span><span class="p">()</span>
<span class="n">Image</span><span class="p">.</span><span class="nf">fromarray</span><span class="p">(</span><span class="n">china</span><span class="p">[:,:,</span><span class="mi">0</span><span class="p">]).</span><span class="nf">show</span><span class="p">()</span>
<span class="n">Image</span><span class="p">.</span><span class="nf">fromarray</span><span class="p">(</span><span class="n">china</span><span class="p">[:,:,</span><span class="mi">1</span><span class="p">]).</span><span class="nf">show</span><span class="p">()</span>
<span class="n">Image</span><span class="p">.</span><span class="nf">fromarray</span><span class="p">(</span><span class="n">china</span><span class="p">[:,:,</span><span class="mi">2</span><span class="p">]).</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div>

<p>세가지 회색조 이미지들을 모두 보았을때 모두 같지 않고 조금씩 다르다.원색 이미지는 이 세 채널의 색상성분들을 혼합한 결과이다.
심층 신경망의 입력은 2차원 이상일때가 많다. 지금 예처럼 원색 이미지가 입력일때는 3차원 텐서가 필요하다. 그런데 입력 견본 하나로 이야기가 끝나는 것이 아니다. 신경망을 훈련할 때는 흔히 데이터 집합에서 추출한 여러개의 견본으로 이루어진 미니배치를 신경망에 입력해서 평균 손실값을 구한다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">torch</span>
<span class="kn">import</span> <span class="n">torchvision</span>
<span class="kn">import</span> <span class="n">torchvision.transforms</span> <span class="k">as</span> <span class="n">transforms</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">transform</span> <span class="o">=</span> <span class="n">transforms</span><span class="p">.</span><span class="nc">Compose</span><span class="p">(</span>
    <span class="p">[</span><span class="n">transforms</span><span class="p">.</span><span class="nc">ToTensor</span><span class="p">(),</span>
     <span class="n">transforms</span><span class="p">.</span><span class="nc">Normalize</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))])</span>

<span class="n">batch_size</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">trainset</span> <span class="o">=</span> <span class="n">torchvision</span><span class="p">.</span><span class="n">datasets</span><span class="p">.</span><span class="nc">CIFAR10</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="sh">'</span><span class="s">./data</span><span class="sh">'</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                        <span class="n">download</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>
<span class="n">trainloader</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">utils</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="nc">DataLoader</span><span class="p">(</span><span class="n">trainset</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">batch_size</span><span class="p">,</span>
                                          <span class="n">shuffle</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">num_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">testset</span> <span class="o">=</span> <span class="n">torchvision</span><span class="p">.</span><span class="n">datasets</span><span class="p">.</span><span class="nc">CIFAR10</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="sh">'</span><span class="s">./data</span><span class="sh">'</span><span class="p">,</span> <span class="n">train</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                       <span class="n">download</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>
<span class="n">testloader</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">utils</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="nc">DataLoader</span><span class="p">(</span><span class="n">testset</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">batch_size</span><span class="p">,</span>
                                         <span class="n">shuffle</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">num_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">classes</span> <span class="o">=</span> <span class="p">(</span><span class="sh">'</span><span class="s">plane</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">car</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bird</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">cat</span><span class="sh">'</span><span class="p">,</span>
           <span class="sh">'</span><span class="s">deer</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">dog</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">frog</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">horse</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ship</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">truck</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Downloading https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz to ./data\cifar-10-python.tar.gz


100%|███████████████████████████████████████████████████████████████| 170498071/170498071 [00:56&lt;00:00, 2998651.67it/s]


Extracting ./data\cifar-10-python.tar.gz to ./data
Files already downloaded and verified
</code></pre></div></div>

<p>이 코드는 Pytorch의 torchvision 모듈을 사용하여 CIFAR-10 데이터셋을 로드하고 전처리하기 위한 것입니다. 각 부분에 대한 설명은 다음과 같습니다.</p>
<ol>
  <li>변환(Transforms):
    <ul>
      <li><code class="language-plaintext highlighter-rouge">transforms.ToTensor()</code>: PIL 이미지 또는 Numpy 배열을 Pytorch 텐서로 변환합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">transforms.Normalizer()</code>: 입력 이미지를 평균을 뺸 후 표준편차로 나누어 정규화합니다. 이는 딥러닝에서 흔한 전처리 단계입니다.</li>
    </ul>
  </li>
  <li>배치 크기(Batch size):
    <ul>
      <li><code class="language-plaintext highlighter-rouge">batch_size = 4</code>: 각 미니 배치에 포함될 샘플의 수를 지정합니다. 이는 훈련중에 사용됩니다.</li>
    </ul>
  </li>
  <li>훈련세트(Traning Set):
    <ul>
      <li><code class="language-plaintext highlighter-rouge">trainset</code>: 훈련을 위한 CIFAR-10 데이터셋입니다.</li>
      <li><code class="language-plaintext highlighter-rouge">torchvision.datasets.CIFAR10</code>: torchvision에서 CIFAR-10 데이터셋을 로드합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">root='./data'</code>: 데이터셋이 다운로드될 디렉토리를 지정합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">train=True</code>: 훈련세트임을 나타냅니다.</li>
    </ul>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">test_images</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">test_labels</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">images</span><span class="p">,</span> <span class="n">labels</span> <span class="ow">in</span> <span class="n">testloader</span><span class="p">:</span>
    <span class="n">test_images</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">images</span><span class="p">.</span><span class="nf">numpy</span><span class="p">())</span>
    <span class="n">test_labels</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">labels</span><span class="p">.</span><span class="nf">numpy</span><span class="p">())</span>

<span class="n">test_images</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">concatenate</span><span class="p">(</span><span class="n">test_images</span><span class="p">)</span>
<span class="n">test_labels</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">concatenate</span><span class="p">(</span><span class="n">test_labels</span><span class="p">)</span>

</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">(</span><span class="n">test_images</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">test_labels</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(10000, 3, 32, 32)
(10000,)
</code></pre></div></div>

<p>위에서 test_images 배열의 차원이 4임을 주목하기 바란다. 첫 차원은 배열에 담긴 이미지 개수(1만개의 이미지)이다. 둘째 차원은 채널개수가 3개임을 나타내고, 셋째와 넷째차원은 이미지들이 32X32 픽셀임을 말해준다. 따라서 이 이미지들은 회색조 이미지가 아니라 원색 이미지일 것이다.이미지가 아닌 데이터에서도, 채널 개수는 데이터가 어떤 식으로 구성되어 있는지를 말해준다. labels는 벡터(1차원 배열)인데, 성분 수는 10000개이다. 여기에는 분류명들이 들어있다. CIFAR-10 데이터 집합의 분류명은 총 10개인데, 일부는 동물들이고, 일부는 탈것들이다. 다음은 123번 견본의 분류명과 이미지를 표시하는 예이다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="c1"># test_images와 test_labels가 이미 정의되어 있다고 가정합니다.
</span>
<span class="c1"># 이미지 보여주기
</span><span class="k">def</span> <span class="nf">show_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">img</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.5</span>  <span class="c1"># 이미지를 정규화 해제
</span>    <span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">transpose</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  <span class="c1"># 이미지의 차원을 변경 (C, H, W) -&gt; (H, W, C)
</span>    <span class="n">plt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># 특정 이미지와 레이블 확인
</span><span class="n">index_to_display</span> <span class="o">=</span> <span class="mi">123</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">레이블: </span><span class="si">{</span><span class="n">test_labels</span><span class="p">[</span><span class="n">index_to_display</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">show_image</span><span class="p">(</span><span class="n">test_images</span><span class="p">[</span><span class="n">index_to_display</span><span class="p">])</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>레이블: 2
</code></pre></div></div>

<p><img src="http://localhost:4000/images/2024-01-24-codinglog(25)/output_15_1.png" alt="output_15_1" /></p>

<ol>
  <li>이미지 보여주기 함수(show_image):</li>
</ol>

<ul>
  <li><code class="language-plaintext highlighter-rouge">img = img / 2 + 0.5</code>: 이미지 정규화를 해제하여 원래 범위로 되돌립니다.</li>
  <li><code class="language-plaintext highlighter-rouge">img = np.transpose(img, (1, 2, 0))</code>: 이미지의 차원을 변경하여 matplotlib에서 정상적으로 표시할 수 있도록 합니다.</li>
</ul>

<ol>
  <li>특정 이미지와 레이블</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">index_to_display</span> <span class="o">=</span> <span class="mi">123</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">레이블: </span><span class="si">{</span><span class="n">test_labels</span><span class="p">[</span><span class="n">index_to_display</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">show_image</span><span class="p">(</span><span class="n">test_images</span><span class="p">[</span><span class="n">index_to_display</span><span class="p">])</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">index_to_display</code>: 확인할 이미지의 인덱스를 선택합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">print(f"레이블: {test_labels[index_to_display]}")</code>: 선택된 이미지의 레이블을 출력합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">show_image(test_images[index_to_display])</code>: 선택된 이미지를 시각화하여 표시합니다.</li>
</ul>

<p>이 코드는 주어진 인덱스(여기서는 123)의 테스트 세트 이미지와 해당 레이블을 출력하고 시각적으로 보여줍니다.</p>

<p>미니배치를 사용한다는 것은 전체 데이터 집합의 한 부분집합을 신경망 모형에 입력한다는 것입니다. 모형이 사용하는 미니배치의 크기(견본 개수)가 24이면, CIFAR-10을 기준으로 입력은 (24, 32, 32, 3) 배열이다. 즉, 이미지가 24개이고 각 이미지는 32행 32열의 행렬(2차원 배열)이며 행렬의 각 성분은 3개의 채널로 구성됩니다. 이런 채널 개념이 심층 신경망의 입력에 국한된 것이 아니라, 층에서 층으로 전달되는 데이터의 형상에도 적용된다는 점을 볼 수 있을 것입니다. 일단 지금은 전통적인 순방향 신경망의 데이터 흐름에 초점을 맞추고 이후에 심층 신경망의 데이터 흐름도 짚고 넘어가겠습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># 이미지를 보여주기 위한 함수
</span>
<span class="k">def</span> <span class="nf">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">img</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.5</span>     <span class="c1"># unnormalize
</span>    <span class="n">npimg</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="nf">numpy</span><span class="p">()</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">transpose</span><span class="p">(</span><span class="n">npimg</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>


<span class="c1"># 학습용 이미지를 무작위로 가져오기
</span><span class="n">dataiter</span> <span class="o">=</span> <span class="nf">iter</span><span class="p">(</span><span class="n">trainloader</span><span class="p">)</span>
<span class="n">images</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="nf">next</span><span class="p">(</span><span class="n">dataiter</span><span class="p">)</span>

<span class="c1"># 이미지 보여주기
</span><span class="nf">imshow</span><span class="p">(</span><span class="n">torchvision</span><span class="p">.</span><span class="n">utils</span><span class="p">.</span><span class="nf">make_grid</span><span class="p">(</span><span class="n">images</span><span class="p">))</span>
<span class="c1"># 정답(label) 출력
</span><span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">classes</span><span class="p">[</span><span class="n">labels</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="si">:</span><span class="mi">5</span><span class="n">s</span><span class="si">}</span><span class="sh">'</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">batch_size</span><span class="p">)))</span>

</code></pre></div></div>

<p>​    <img src="http://localhost:4000/images/2024-01-24-codinglog(25)/output_17_0.png" alt="output_17_0" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deer  deer  plane truck
</code></pre></div></div>

<p>이 코드는 훈련데이터로부터 무작위로 선택된 이미지를 시각화하여 보여주는 기능을 포함합니다.</p>
<ol>
  <li>imshow():
    <ul>
      <li>이미지를 시각화하기 위한 함수입니다.</li>
      <li><code class="language-plaintext highlighter-rouge">img = img / 2 + 0.5</code>: 이미지 정규화를 해제하여 원래 범위로 되돌립니다.</li>
      <li><code class="language-plaintext highlighter-rouge">npimg = img.numpy()</code>: PyTorch텐서를 Numpy배열로 변환합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">plt.imshow(np.transpose(npimg, (1,2,0)))</code>: 이미지를 보여줍니다.</li>
      <li><code class="language-plaintext highlighter-rouge">plt.show()</code>:시각화된 이미지를 표시합니다.</li>
    </ul>
  </li>
  <li>데이터 불러오기:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">detaiter = iter(trainloader)</code>: 훈련데이터 로더에서 반복자를 생성합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">imgaes, labels = next(detaiter)</code>: 다음 미니 배치의 이미지와 레이블을 가져옵니다.</li>
    </ul>
  </li>
  <li>이미지 시각화
    <ul>
      <li><code class="language-plaintext highlighter-rouge">torchvision.utils.make_grid(images)</code>: 미니 배치의 이미지를 하나의 그리드로 만듭니다.</li>
      <li><code class="language-plaintext highlighter-rouge">imshow(...)</code>: 앞서 정의한 함수를 사용하여 이미지를 시각화합니다.</li>
    </ul>
  </li>
  <li>레이블 출력:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">print(' '.join(f'{classes[labels[j]]:5s}' for j in range(batch_size)))</code>: 해당 미니 배치에 대한 정답 레이블을 출력합니다. 클래스 이름과 함께 출력되며, 각 클래스는 5자리로 정렬됩니다.</li>
    </ul>
  </li>
</ol>

<hr />

<p>현재 동키카를 깔고 있다. 예전에 동키카를 깔다가 계속 막혔던 것은 opencv를 알맞게 깔지 못해서였다.</p>

<p>해당 이슈를 해결한 솔루션은 여기 (<a href="https://velog.io/@kaiseong/%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC%ED%8C%8C%EC%9D%B4-OpenCV%EC%84%A4%EC%B9%98">링크</a>)에 있다. 방법을 나열하자면,</p>

<ul>
  <li>라이브러리 조회를 위해 pkg-config를  설치하고 명령어를 입력해 줍니다.</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>pkg-config
~<span class="nv">$ </span>pkg-config <span class="nt">--modversion</span> opencv
</code></pre></div></div>

<p>위 명령어를 치고,</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Package opencv was not found <span class="k">in </span>the pkg-config search path.
Perhaps you should add the directory containing <span class="sb">`</span>opencv.pc<span class="s1">'
to the PKG_CONFIG_PATH environment variable
No package '</span>opencv<span class="s1">' found
</span></code></pre></div></div>

<p>위 문구가 뜬다면, 바로 설치로 넘어가자!만약 만약 설치가 되어 있는데 그래도 opencv가 제대로 안된다면 어딘가가 꼬인것이다.(마치 나의 인생처럼…. 응??…이 뭔??) 설치는 다음과 같다.</p>

<h2 id="설치준비">설치준비</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt upgrade
<span class="nb">sudo </span>reboot
</code></pre></div></div>

<p>재부팅되면 이제 운영체제랑 컴파일러 버전을 확인해줍니다.</p>

<h3 id="1운영체제-버전-확인하기">1&gt;운영체제 버전 확인하기</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">uname</span> <span class="nt">-a</span>
</code></pre></div></div>

<blockquote>
  <p>Linux raspberrypi 5.15.56-v8+ #1575 SMP PREEMPT Fri Jul 22 20:31:26 BST 2022 aarch GNU/Linux</p>
</blockquote>

<p>위와 같이 aarch64라고 뜨면 제대로 된겁니다(참고로 aarch는 아치리눅스(Ditro)라고 합니다.)</p>

<p>이번에는</p>

<h3 id="2컴파일러-버전-확인하기">2&gt;컴파일러 버전 확인하기</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc <span class="nt">-v</span>
</code></pre></div></div>

<blockquote>
  <p>Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/aarch64-linux-gnu/10/lto-wrapper
Target: aarch64-linux-gnu
Configured with: ../src/configure -v –with-pkgversion=’Debian 10.2.1-6’ –with-bugurl=file:///usr/share/doc/gcc-10/README.Bugs –enable-languages=c,ada,c++,go,d,fortran,objc,obj-c++,m2 –prefix=/usr –with-gcc-major-version-only –program-suffix=-10 –program-prefix=aarch64-linux-gnu- –enable-shared –enable-linker-build-id –libexecdir=/usr/lib –without-included-gettext –enable-threads=posix –libdir=/usr/lib –enable-nls –enable-bootstrap –enable-clocale=gnu –enable-libstdcxx-debug –enable-libstdcxx-time=yes –with-default-libstdcxx-abi=new –enable-gnu-unique-object –disable-libquadmath –disable-libquadmath-support –enable-plugin –enable-default-pie –with-system-zlib –enable-libphobos-checking=release –with-target-system-zlib=auto –enable-objc-gc=auto –enable-multiarch –enable-fix-cortex-a53-843419 –disable-werror –enable-checking=release –build=aarch64-linux-gnu –host=aarch64-linux-gnu –target=aarch64-linux-gnu –with-build-config=bootstrap-lto-lean –enable-link-mutex
Thread model: posix
Supported LTO compression algorithms: zlib zstd
gcc version 10.2.1 20210110 (Debian 10.2.1-6)</p>
</blockquote>

<p>위와 같이 Taget이 aarch64라고 뜨면 제대로 된겁니다.</p>

<h3 id="설치-여유공간-확보하기">설치 여유공간 확보하기</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>free <span class="nt">-m</span>
</code></pre></div></div>

<p><img src="http://localhost:4000/images/2024-01-24-codinglog(25)/image-20240125102627215.png" alt="image-20240125102627215" /></p>

<p>명령어를 입력하면 위와 같이 표시된다. 우리가 설치하려는 것은 OpenCV 4.5.5이기 때문에 Mem+Swap이 6500이 넘어가게 맞춰줘야 합니다. 초기에는 Swap이 위와 같이 99로 되어 있을 겁니다.</p>

<h3 id="swap-늘려주기">Swap 늘려주기</h3>

<ul>
  <li>먼저 디스크 공간부터 확인</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span><span class="nb">df</span> <span class="nt">-h</span>
</code></pre></div></div>

<ul>
  <li>swap파일 편집하기</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vi /etc/dphys-swapfile
</code></pre></div></div>

<p>안에 들어가서 <code class="language-plaintext highlighter-rouge">CONF_SWAPSIZE=100</code>으로 되어 있는 부분을 <code class="language-plaintext highlighter-rouge">CONF_SWAPSIZE=4096</code>으로 변경해줍니다.</p>

<ul>
  <li>그리고 재시작!</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>service dphys-swapfile restart
~<span class="nv">$ </span>free <span class="nt">-m</span>
</code></pre></div></div>

<p>용량을 확보했으면 이제 그 공간에 OpenCV를 설치해보겠습니다.</p>

<h2 id="본격적으로-opencv-설치하기">본격적으로 OpenCV 설치하기</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>wget https://github.com/Qengineering/Install-OpenCV-Raspberry-Pi-64-bits/raw/main/OpenCV-4-5-5.sh
~<span class="nv">$ </span><span class="nb">sudo chmod </span>755 ./OpenCV-4-5-5.sh
~<span class="nv">$ </span>./OpenCV-4-5-5.sh
</code></pre></div></div>

<p>를 입력하면 자동설치가 됩니다. 1시간에서 2시간까지 예상됩니다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>python3
~<span class="nv">$ </span>import cv2
~<span class="nv">$ </span>cv2.__version__
</code></pre></div></div>

<p>이러면 설치완료입니다.</p>

<h2 id="삽질현황">삽질현황…</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/waveshare/donkeycar
<span class="nb">cd </span>donkeycar
git checkout master
pip <span class="nb">install</span> <span class="nt">-e</span> .[pi]
</code></pre></div></div>

<p>현재 위에서 install하는 부분에서 막혀버렸다.</p>

<p>그래서 <code class="language-plaintext highlighter-rouge">pip install -e .</code>로 바꿔서 명령어 때렸다. 하지만 아래 에러뜸..</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR: THESE PACKAGES DO NOT MATCH THE HASHES FROM THE REQUIREMENTS FILE. If you have updated the package versions, please update the hashes. Otherwise, examine the package contents carefully<span class="p">;</span> someone may have tampered with them.
    h5py from https://www.piwheels.org/simple/h5py/h5py-3.10.0-cp39-cp39-linux_armv7l.whl#sha256<span class="o">=</span>9bb99b9616a2238fd48b338efa61498b70f66f7c32126a57d009285d0eb570fb <span class="o">(</span>from <span class="nv">donkeycar</span><span class="o">==</span>3.1.0<span class="o">)</span>:
        Expected sha256 9bb99b9616a2238fd48b338efa61498b70f66f7c32126a57d009285d0eb570fb
             Got        d5d0599a2a0590cac56fa9d0fc905d4d57c5695b188b5755febaab6ec2879452
</code></pre></div></div>

<p>대충 읽어보니까 모듈의 에러해시값이 불일치한다고 하는데, 내가 해시가 뭔들알겠는고 ㅅㅂ…</p>

<p>일단 명령어 하나하나 찔러보기로 했다. 우선 이거!</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span><span class="nv">h5py</span><span class="o">==</span>3.10.0
</code></pre></div></div>

<p>효과는 없었다. Next!!</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>h5py <span class="nt">--upgrade</span> <span class="nt">--no-dependencies</span> <span class="nt">--force</span>
</code></pre></div></div>

<p>효과는 없었다. 주변정보들을 훑어보았다.</p>

<p>알고보니 텐서플로우를 깔면 그안에 종속되서 깔리는 모듈중 하나라고 한다.</p>

<p>이 h5py라는 자동으로 설치되는 패키지가 충돌이 일어나서 pip으로 지웠다가 다시 재설치해준다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pip uninstall h5py
<span class="nb">sudo </span>pip <span class="nb">install </span>h5py
</code></pre></div></div>

<p>HuHu…. 효과는 없었다. 근데 이렇게 설치하면 최신으로 까는거고, 최신으로 깔때 해시오류가 발생한 것이었을수도 있으니, 이번에는 다운그레이드시켜서 깔아보기로 했다.</p>

<p>기존에는 <code class="language-plaintext highlighter-rouge">3.10.0</code>버전으로 깔았는데 이번에는 <code class="language-plaintext highlighter-rouge">2.10.0</code> 버전으로 깔아보려 한다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span><span class="nv">h5py</span><span class="o">==</span>2.10.0
</code></pre></div></div>

<p>주변정보를 더 찾아보니 h5py는 아나콘다에 기본적으로 탑재되어 있다고 한다. 그래서 나는 아나콘다의 리눅스 버전인 미니콘다를 깔수있지 않을까 하고 찾아보다가 다음 순서로 깔수있다는 걸 알게 되었다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get upgrade
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-armv7l.sh
<span class="nb">chmod</span> +x Miniconda3-latest-Linux-armv7l.sh
<span class="nb">sudo</span> /bin/bash Miniconda3-latest-Linux-armv7l.sh
</code></pre></div></div>

<p>위에서 깔아주면 아래와 같이 yes/no하라는 문구가 세번정도 나오는데 두번 yes하고 나서,</p>

<p>아래와 같이 경로를 물어보는데 <code class="language-plaintext highlighter-rouge">/home/pi/miniconda3</code>라고 해주고 Enter!</p>

<p><img src="http://localhost:4000/images/2024-01-24-codinglog(25)/image-20240125003927800.png" alt="image-20240125003927800" /></p>

<p>그리고 <code class="language-plaintext highlighter-rouge">to PATH in your /root/.bashrc ? [yes/no]</code>라고 뜨면, 무조건 YES!!</p>

<p><img src="http://localhost:4000/images/2024-01-24-codinglog(25)/image-20240125003101626.png" alt="image-20240125003101626" /></p>

<p>그러면 제대로 깔리게 된다.</p>

<p>마지막으로 <code class="language-plaintext highlighter-rouge">/home/pi/.bashrc</code> 로 들어가줍니다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vi /home/pi/.bashrc
</code></pre></div></div>

<p>아래와 같이 맨 첫째줄에 <code class="language-plaintext highlighter-rouge">export PATH="/home/pi/miniconda3/bin:SPATH"</code>를 넣어줍니다.</p>

<p><img src="http://localhost:4000/images/2024-01-24-codinglog(25)/image-20240125004708702.png" alt="image-20240125004708702" /></p>

<p>그러면 설치 끝!!!</p>

<h2 id="미니콘다-가상환경-생성하기">미니콘다 가상환경 생성하기</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda create <span class="nt">-n</span> dcoworks <span class="nv">python</span><span class="o">=</span>3.7
</code></pre></div></div>

<p><img src="http://localhost:4000/images/2024-01-24-codinglog(25)/image-20240125010052492.png" alt="image-20240125010052492" /></p>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#python" class="page__taxonomy-item p-category" rel="tag">python</a><span class="sep">, </span>
    
      <a href="/tags/#shell" class="page__taxonomy-item p-category" rel="tag">shell</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#2024-01" class="page__taxonomy-item p-category" rel="tag">2024-01</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time class="dt-published" datetime="2024-01-24T00:00:00+09:00">2024-01-24</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%EC%BD%94%EB%94%A9%EC%9D%BC%EC%A7%80%282024-01-24%29%20http%3A%2F%2Flocalhost%3A4000%2F2024-01%2Fcodinglog%2825%29%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2F2024-01%2Fcodinglog%2825%29%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2024-01%2Fcodinglog%2825%29%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/2024-01/codinglog(24)/" class="pagination--pager" title="코딩일지(2024-01-23)
">이전</a>
    
    
      <a href="/2024-01/codinglog(26)/" class="pagination--pager" title="코딩일지(2024-01-25)
">다음</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">참고</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2024-02/codinglog(37)/" rel="permalink">코딩일지(2024-02-22)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-02-22T00:00:00+09:00">2024-02-22</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          최대 1 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">오늘 드디어 파이레이서에 학습을 시켰다!!
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2024-02/codinglog(36)/" rel="permalink">코딩일지(2024-02-08)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-02-08T00:00:00+09:00">2024-02-08</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">스로틀링 문제를 해결중이다.
config.py코드 둘러보기
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2024-02/codinglog(35)/" rel="permalink">코딩일지(2024-02-04)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-02-04T00:00:00+09:00">2024-02-04</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          3 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">dcworks..너란 녀석.. 어렵다..
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2024-02/codinglog(34)/" rel="permalink">코딩일지(2024-02-03)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-02-03T00:00:00+09:00">2024-02-03</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          최대 1 분 소요
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">캐글에 가입해보았다!
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

  </div>

  

  <div id="footer" class="page__footer">
    <footer>
      <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
      <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 YUNSUNGWOONG(JackSmith). Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

    </footer>
  </div>

  
  <script src="/assets/js/main.min.js"></script>










</body>

</html>